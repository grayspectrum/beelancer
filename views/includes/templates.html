<!--
	beelancer - templates.html
	Author: Gordon Hall
-->

<!-- Confirm Box -->
<script id="tmpl-bee-ui_confirm" type="text/x-handlebars-template">
	<div id="bee-ui_confirm">
		<div class="light-gradient popup animated flipInY">
			<p>{{message}}</p>
			<ul class="popup-options">
				<li>
					<button id="bee-ui_confirm_cancel" class="light-gradient">Cancel</button>
				</li>
				<li>
					<button id="bee-ui_confirm_ok" class="gold-gradient">Confirm</button>
				</li>
			</ul>
		</div>
	</div>
</script>

<!-- Projects List -->
<script id="tmpl-projects_list" type="text/x-handlebars-template">
	{{#if this.length}}
		<ul>
			{{#each this}}
				<li>
					<a href="/#!/projects?viewProject={{_id}}" {{#if pastDue}}class="overdue"{{/if}}>
						<strong>{{title}}</strong>
						<span class="project_due">{{deadlineText}}</span>
					</a>
				</li>
			{{/each}}
		</ul>
	{{else}}
		<p class="no_projects">No projects to display.</p>
	{{/if}}
</script>

<!-- Project Details -->
<script id="tmpl-user_showcase" type="text/x-handlebars-template">
	<div class="user_showcase">
		<img src="{{avatarPath}}" width="48px" height="48px" />
		<strong>{{firstName}} {{lastName}}</strong>
		<em>{{title}} {{#if company}}at {{company}}{{/if}}</em>
		<a href="/#!/team?viewProfile={{_id}}">View Profile</a>
	</div>
</script>

<!-- Project Details -->
<script id="tmpl-project_details" type="text/x-handlebars-template">
	<div class="light-gradient center-pane animated fadeInUp">
		<div id="project_details">
			<h4 class="gold-gradient">{{title}}</h4>
			<div class="viewproject_deadline">
				{{#if isActive}}
					{{#if isOverdue}}
						Due <span class="calendardate">{{daysText}}</span> days ago.
					{{else}}
						Due in <span class="calendardate">{{daysText}}</span> days.
					{{/if}}
				{{else}}
					<span class="closed green-gradient">This project is closed.</span>
				{{/if}}
			</div>
			<div class="viewproject_ownedby">
				<strong>This project is owned by:</strong>
				<div></div>
			</div>
			<div class="viewproject_description">
				<div class="markdown rollout">
					{{{description}}}
				</div>
			</div>
			<div class="viewproject_stats">
				This project has <a href="#!/team?projectId={{_id}}">{{members.length}} members</a> working on <a href="/#!/tasks?project={{_id}}">{{tasks.length}} tasks</a>.
			</div>
			<div class="float_wrap">
				<div id="viewproject_team" class="half_list">
					<h5 class="half-list-header">
						Team Members
						<button class="btn-add" id="project_add_team">Add a Teammate</button>
					</h5>
					{{#if members.length}}
						<ul class="rollout none">
							{{#each members}}
								<li class="list-member" data-profile="{{this.profile}}">
									<span class="loading-list">Loading Member...</span>
								</li>
							{{/each}}
						</ul>
					{{else}}
						<p class="rollout none">You are the only member of this project.</p>
					{{/if}}
				</div>
				<div id="viewproject_tasks" class="half_list">
					<h5 class="half-list-header">
						Active Tasks
						<button class="btn-add" id="project_add_task">Add a Task</button>
					</h5>
					{{#if tasks.length}}
						<ul class="rollout none">
							{{#each tasks}}
								{{#if this.isComplete}}
								{{else}}
									<a href="/#!/tasks?viewTask={{_id}}"
									<li class="list-task" id="task-{{this._id}}">
										<span class="task-list-title">{{this.title}}</span>
										<span class="task-list-hours">{{this.hoursWorked}} hours.</span>
									</li>
								{{/if}}
							{{/each}}
						</ul>
					{{else}}
						<p class="rollout none">There are no tasks attached to this project.</p>
					{{/if}}
				</div>
			</div>
		</div>
	</div>
</script>

<!-- Member List Item -->
<script id="tmpl-list_member" type="text/x-handlebars-template">
	{{#if this.length}}
		<ul>
			{{#each this}}
				<li>
					<a href="/#!/team?viewProfile={{_id}}">
						<img src="{{avatarPath}}" width="32px" height="32px" />
						<span class="member-name">{{firstName}} {{lastName}}</span>
						<span class="member-title">{{title}}</span>
					</a>
				</li>
			{{/each}}
		</ul>
	{{else}}
		{{#if this.firstName}}
			<ul>
				<li>
					<a href="/#!/team?viewProfile={{_id}}">
						<img src="{{#if avatarPath}}{{avatarPath}}{{else}}/assets/images/default-avatar.jpg{{/if}}" width="32px" height="32px" />
						<span class="member-name">{{firstName}} {{lastName}}</span>
						<span class="member-title">{{title}}</span>
					</a>
				</li>
			</ul>
		{{else}}
			<p class="no_projects">No users found.</p>
		{{/if}}
	{{/if}}
</script>

<!-- Team Populate -->
<script id="tmpl-populate_team" type="text/x-handlebars-template">
	{{#if this.length}}
		<ul>
			{{#each this}}
				<li class="teammember" data-id="{{this._id}}">
					<img src="{{this.avatarPath}}" width="32px" height="32px" alt="{{this.avatarPath}}" />
					<span class="team_list_name">{{this.firstName}} {{this.lastName}}</span>
				</li>
			{{/each}}
		</ul>
	{{else}}	
		<p class="no_projects">
			No teammates to display.
		</p>
	{{/if}}
</script>

<!-- Message List -->
<script id="tmpl-message_list" type="text/x-handlebars-template">
	{{#if this.length}}
		<ul>
			{{#each this}}
				<li class="message {{#if this.isRead}}isRead{{/if}}" data-id="{{this._id}}">
					<div class="msg_from">
						{{#if isSent}}
							<img src="{{this.to.avatarPath}}" width="24px" height="24px" alt="{{this.to.avatarPath}}" />
						{{else}}
							<img src="{{this.from.avatarPath}}" width="24px" height="24px" alt="{{this.from.avatarPath}}" />
						{{/if}}
						<span class="team_list_name">
							{{#if isSent}}
								{{this.to.firstName}} {{this.to.lastName}}
							{{else}}
								{{this.from.firstName}} {{this.from.lastName}}
							{{/if}}
							<span class="msg_sentOn">{{this.sentOn}}</span>
						</span>
					</div>
					<p>{{this.body}}</p>
				</li>
			{{/each}}
		</ul>
	{{else}}
		<p class="no_projects">You have no messages.</p>
	{{/if}}
</script>

<!-- Message View -->
<script id="tmpl-message_view" type="text/x-handlebars-template">
	<div class="light-gradient center-pane animated fadeInUp">
		<div class="messageview_from">
			<a href="/#!/team?viewProfile={{from._id}}">
				<img align="left" src="{{from.avatarPath}}" width="48px" height="48px" alt="{{avatarPath}}" />
				<strong class="messageview_fromname">{{from.firstName}} {{from.lastName}}</strong>
				<span class="messageview_sentOn">{{sentOn}}</span>
			</a>
		</div>
		<div class="messageview_body">{{body}}</div>
		{{#if attachment}}
			<div class="msg_attachment">
				<button class="light-gradient" id="msg_action_decline">Decline</button>
				<button class="gold-gradient" id="msg_action_accept" data-action="{{attachment.action}}" data-data="{{attachment.data}}">Accept</button>
			</div>
		{{/if}}
	</div>
</script>

<!-- User Profile -->
<script id="tmpl-user_profile" type="text/x-handlebars-template">
	<div class="light-gradient center-pane animated fadeInUp">
		<div class="profile_info">
			<div class="profile_avatar">
				<img src="{{avatarPath}}" height="80px" width="80px" alt="{{firstName}} {{lastName}}" />
			</div>
			<strong class="profile_name">{{firstName}} {{lastName}}</strong>
			<em class="profile_title">{{title}} {{#if company}}at <span>{{company}}</span>{{/if}}</em>
		</div>
		{{#if about}}
			<div class="profile_about">
				<div class="bubble">{{about}}</div>
			</div>
		{{/if}}
		<h4 class="gold-gradient">Endorsements</h4>
		<div class="profile_ratings">
			Loading endorsements...
		</div>
	</div>
</script>

<!-- Ratings list -->
<script id="tmpl-profile_ratings" type="text/x-handlebars-template">
	{{#if user.ratings.length}}
		<ul>
			{{#each user.ratings}}
				<li>
					<div class="rating_from">
						<img src="{{fromUser.avatarPath}}" width="32px" height="32px" />
						<strong>{{fromUser.firstName}} {{fromUser.lastName}}</strong>
						<p>{{comment}}</p>
					</div>
				</li>
			{{/each}}
		</ul>
	{{else}}
		<p class="emptyList">This user has no endorsements.</p>
	{{/if}}
</script>